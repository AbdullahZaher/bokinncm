(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[702],{50199:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(61750);let l=(0,a.Z)("BarChart",[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]])},38812:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(61750);let l=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},61567:function(e,t,s){"use strict";s.d(t,{Z:function(){return l}});var a=s(61750);let l=(0,a.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},445:function(e,t,s){Promise.resolve().then(s.bind(s,7105))},7105:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return u}});var a=s(9268),l=s(86006),r=s(51597),n=s(61750);let o=(0,n.Z)("CalendarDays",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]]);var i=s(50199),c=s(38812),d=s(61567),h=s(99154);function x(){let[e,t]=(0,l.useState)({totalBookings:0,revenue:0,activeRooms:0,newCustomers:0,bookingGrowth:0,revenueGrowth:0}),[s,n]=(0,l.useState)(!0);return((0,l.useEffect)(()=>{(async function(){try{let e=new Date,s=new Date(e.getFullYear(),e.getMonth(),1),a=new Date(e.getFullYear(),e.getMonth()+1,0),{data:l,error:r}=await h.O.from("reservations").select("*").gte("created_at",s.toISOString()).lte("created_at",a.toISOString());if(r)throw r;l&&l.length>0&&console.log("Sample booking:",l[0]);let n=new Date(e.getFullYear(),e.getMonth()-1,1),o=new Date(e.getFullYear(),e.getMonth(),0),{data:i,error:c}=await h.O.from("reservations").select("*").gte("created_at",n.toISOString()).lte("created_at",o.toISOString());if(c)throw c;let d=(null==l?void 0:l.reduce((e,t)=>{let s=t.amount||t.total||t.rate||0;return e+s},0))||0,x=(null==i?void 0:i.reduce((e,t)=>{let s=t.amount||t.total||t.rate||0;return e+s},0))||0,m=(null==i?void 0:i.length)>0?(((null==l?void 0:l.length)||0)-i.length)/i.length*100:0,{count:u,error:g}=await h.O.from("rooms").select("*",{count:"exact",head:!0});if(g)throw g;let f=new Date(e.setDate(e.getDate()-7)),{count:y,error:v}=await h.O.from("reservations").select("*",{count:"exact",head:!0}).gte("created_at",f.toISOString());if(v)throw v;t({totalBookings:(null==l?void 0:l.length)||0,revenue:d,activeRooms:u||0,newCustomers:y||0,bookingGrowth:m,revenueGrowth:x>0?(d-x)/x*100:0})}catch(e){console.error("Error fetching dashboard stats:",e),console.log("Full error:",JSON.stringify(e,null,2))}finally{n(!1)}})()},[]),s)?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[void 0,void 0,void 0,void 0].map((e,t)=>(0,a.jsxs)(r.Zb,{className:"animate-pulse",children:[(0,a.jsx)(r.Ol,{className:"space-y-0 pb-2",children:(0,a.jsx)("div",{className:"h-4 w-24 bg-gray-200 rounded"})}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"h-8 w-16 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-3 w-32 bg-gray-200 rounded mt-2"})]})]},t))}):(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Bookings"}),(0,a.jsx)(o,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.totalBookings}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.bookingGrowth>=0?"+":"",e.bookingGrowth.toFixed(1),"% from last month"]})]})]}),(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Revenue"}),(0,a.jsx)(i.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsxs)("div",{className:"text-2xl font-bold",children:["$",e.revenue.toLocaleString("en-US",{minimumFractionDigits:2})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.revenueGrowth>=0?"+":"",e.revenueGrowth.toFixed(1),"% from last month"]})]})]}),(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"Active Rooms"}),(0,a.jsx)(c.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.activeRooms}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Active properties"})]})]}),(0,a.jsxs)(r.Zb,{className:"hover:shadow-lg transition-shadow",children:[(0,a.jsxs)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(r.ll,{className:"text-sm font-medium",children:"New Customers"}),(0,a.jsx)(d.Z,{className:"h-4 w-4 text-primary"})]}),(0,a.jsxs)(r.aY,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold",children:e.newCustomers}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Last 7 days"})]})]})]})}var m=s(46644),u=()=>(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Dashboard"}),(0,a.jsx)(x,{}),(0,a.jsx)("div",{className:"mt-8",children:(0,a.jsx)(m.default,{})})]})}},function(e){e.O(0,[222,417,644,667,488,744],function(){return e(e.s=445)}),_N_E=e.O()}]);