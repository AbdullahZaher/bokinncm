(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[109],{86803:function(e,t,a){Promise.resolve().then(a.bind(a,33894))},33894:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return m}});var s=a(9268),n=a(86006),r=a(51597),l=a(25414),i=a(23),c=a(31482),o=a(81037),d=a(24088),u=a(99154),f=a(31859);function m(){let[e,t]=(0,n.useState)([]),[a,m]=(0,n.useState)({totalBookings:0,totalRevenue:0,averageRate:0,occupancyRate:0}),[h,x]=(0,n.useState)(!0),{toast:p}=(0,f.pm)(),j=async()=>{try{let e=new Date().getFullYear(),{data:a,error:s}=await u.O.from("reservations").select("check_in, price").gte("check_in","".concat(e,"-01-01")).lte("check_in","".concat(e,"-12-31")).neq("status","cancelled");if(s)throw s;let n=Array(12).fill(0);null==a||a.forEach(e=>{let t=new Date(e.check_in).getMonth();n[t]+=e.price||0});let r=n.map((e,t)=>({name:new Date(2024,t).toLocaleString("default",{month:"short"}),total:e}));t(r);let{data:l,error:i}=await u.O.from("reservations").select("price, check_in, check_out").neq("status","cancelled");if(i)throw i;let c=(null==l?void 0:l.length)||0,o=(null==l?void 0:l.reduce((e,t)=>e+(t.price||0),0))||0,d=c>0?o/c:0,{data:f}=await u.O.from("rooms").select("id").eq("available",!0),h=(null==f?void 0:f.length)||0,x=365*h,p=(null==l?void 0:l.reduce((e,t)=>{let a=new Date(t.check_in),s=new Date(t.check_out),n=Math.ceil((s.getTime()-a.getTime())/864e5);return e+n},0))||0;m({totalBookings:c,totalRevenue:o,averageRate:d,occupancyRate:x>0?p/x*100:0})}catch(e){console.error("Error fetching analytics:",e),p({title:"Error",description:"Failed to fetch analytics data",variant:"destructive"})}finally{x(!1)}};return(0,n.useEffect)(()=>{j()},[]),(0,s.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Analytics Dashboard"}),(0,s.jsxs)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4 mb-6",children:[(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Bookings"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)("div",{className:"text-2xl font-bold",children:a.totalBookings})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Total Revenue"})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",a.totalRevenue.toFixed(2)]})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Average Rate"})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:["$",a.averageRate.toFixed(2)]})})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:(0,s.jsx)(r.ll,{className:"text-sm font-medium",children:"Occupancy Rate"})}),(0,s.jsx)(r.aY,{children:(0,s.jsxs)("div",{className:"text-2xl font-bold",children:[a.occupancyRate.toFixed(1),"%"]})})]})]}),(0,s.jsxs)(r.Zb,{children:[(0,s.jsx)(r.Ol,{children:(0,s.jsx)(r.ll,{children:"Monthly Revenue"})}),(0,s.jsx)(r.aY,{children:(0,s.jsx)(l.h,{width:"100%",height:350,children:(0,s.jsxs)(i.v,{data:e,children:[(0,s.jsx)(c.K,{dataKey:"name",stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1}),(0,s.jsx)(o.B,{stroke:"#888888",fontSize:12,tickLine:!1,axisLine:!1,tickFormatter:e=>"$".concat(e)}),(0,s.jsx)(d.$,{dataKey:"total",fill:"#F3C321",radius:[4,4,0,0],name:"Revenue"})]})})})]})]})}},51597:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return d},eW:function(){return u},ll:function(){return c}});var s=a(9268),n=a(86006),r=a(26602);let l=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...n})});l.displayName="Card";let i=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex flex-col space-y-1.5 p-6",a),...n})});i.displayName="CardHeader";let c=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("h3",{ref:t,className:(0,r.cn)("text-2xl font-semibold leading-none tracking-tight",a),...n})});c.displayName="CardTitle";let o=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("p",{ref:t,className:(0,r.cn)("text-sm text-muted-foreground",a),...n})});o.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("p-6 pt-0",a),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:a,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,r.cn)("flex items-center p-6 pt-0",a),...n})});u.displayName="CardFooter"},31859:function(e,t,a){"use strict";a.d(t,{pm:function(){return f}});var s=a(86006);let n=0,r=new Map,l=e=>{if(r.has(e))return;let t=setTimeout(()=>{r.delete(e),d({type:"REMOVE_TOAST",toastId:e})},2e3);r.set(e,t)},i=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:a}=t;return a?l(a):e.toasts.forEach(e=>{l(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===a||void 0===a?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},c=[],o={toasts:[]};function d(e){o=i(o,e),c.forEach(e=>{e(o)})}function u(e){let{...t}=e,a=(n=(n+1)%Number.MAX_VALUE).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:a});return d({type:"ADD_TOAST",toast:{...t,id:a,open:!0,onOpenChange:e=>{e||s()}}}),{id:a,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:a}})}}function f(){let[e,t]=s.useState(o);return s.useEffect(()=>(c.push(t),()=>{let e=c.indexOf(t);e>-1&&c.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},99154:function(e,t,a){"use strict";a.d(t,{O:function(){return n}});var s=a(88325);let n=(0,s.eI)("https://sezwmumuobqanzhvkxhl.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNlendtdW11b2JxYW56aHZreGhsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzI3MzExODIsImV4cCI6MjA0ODMwNzE4Mn0.BDU6PpDeCeOlYkVN3BLygPL4JBy1awPW7AD5LFIKqlg",{auth:{persistSession:!0,autoRefreshToken:!0,storageKey:"bokinn-auth",storage:{getItem:e=>localStorage.getItem(e),setItem:(e,t)=>{localStorage.setItem(e,t)},removeItem:e=>{localStorage.removeItem(e)}}}})},26602:function(e,t,a){"use strict";a.d(t,{cn:function(){return r}});var s=a(89791),n=a(20293);function r(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,n.m)((0,s.W)(t))}}},function(e){e.O(0,[222,639,510,667,488,744],function(){return e(e.s=86803)}),_N_E=e.O()}]);