(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{2226:function(e,t,r){Promise.resolve().then(r.bind(r,85289))},85289:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return m}});var a=r(9268),s=r(86006),n=r(68569),i=r(70525),o=r(13583),l=r(31210),d=r(51597),c=r(31859),u=r(63266),f=r(20311);function m(){let[e,t]=(0,s.useState)(!0),[r,m]=(0,s.useState)(!0),[p,h]=(0,s.useState)(!1),[x,g]=(0,s.useState)({email:"",full_name:""}),[w,v]=(0,s.useState)({current:"",new:"",confirm:""}),[b,y]=(0,s.useState)(""),[j,N]=(0,s.useState)(Intl.DateTimeFormat().resolvedOptions().timeZone),_=(0,u.createClientComponentClient)(),{toast:k}=(0,c.pm)();(0,s.useEffect)(()=>{!async function(){try{let{data:{user:e}}=await _.auth.getUser();if(e){let{data:t}=await _.from("hotel_owners").select("*").eq("id",e.id).single();t&&(g({email:e.email||"",full_name:t.full_name||""}),h(t.dark_mode||!1),m(t.notifications||!1),N(t.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone))}}catch(e){console.error("Error loading user data:",e),k({title:"Error loading settings",description:e.message||"Failed to load user settings",variant:"destructive"})}finally{t(!1)}}()},[_,k]);let S=async()=>{try{let{data:{user:e}}=await _.auth.getUser();if(!e)throw Error("No user found");let{error:t}=await _.auth.updateUser({data:{full_name:x.full_name}});if(t)throw t;let{error:a}=await _.from("hotel_owners").update({full_name:x.full_name,dark_mode:p,notifications:r,timezone:j,updated_at:new Date().toISOString()}).eq("id",e.id);if(a)throw a;document.documentElement.classList.toggle("dark",p),k({title:"Settings saved",description:"Your preferences have been updated successfully.",variant:"default",duration:3e3})}catch(e){console.error("Error saving settings:",e),k({title:"Error",description:e.message||"Failed to save settings. Please try again.",variant:"destructive",duration:3e3})}},C=async()=>{if(y(""),!w.current||!w.new||!w.confirm){y("All password fields are required"),k({title:"Validation Error",description:"All password fields are required",variant:"destructive"});return}if(w.new!==w.confirm){y("New passwords do not match"),k({title:"Validation Error",description:"New passwords do not match",variant:"destructive"});return}if(w.new.length<6){y("New password must be at least 6 characters"),k({title:"Validation Error",description:"New password must be at least 6 characters",variant:"destructive"});return}try{let{error:e}=await _.auth.updateUser({password:w.new});if(e)throw e;v({current:"",new:"",confirm:""}),k({title:"Success",description:"Your password has been updated successfully."})}catch(e){console.error("Error updating password:",e),y(e.message||"Failed to update password"),k({title:"Error",description:e.message||"Failed to update password. Please try again.",variant:"destructive"})}};return e?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("main",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Settings"}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Account Settings"})}),(0,a.jsxs)(d.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Account Information"}),(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(o._,{htmlFor:"full_name",children:"Full Name"}),(0,a.jsx)(i.I,{type:"text",id:"full_name",value:x.full_name,onChange:e=>g({...x,full_name:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(o._,{htmlFor:"email",children:"Email"}),(0,a.jsx)(i.I,{type:"email",id:"email",value:x.email,disabled:!0})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Preferences"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.r,{id:"darkMode",checked:p,onCheckedChange:h}),(0,a.jsx)(o._,{htmlFor:"darkMode",children:"Dark Mode"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(l.r,{id:"notifications",checked:r,onCheckedChange:m}),(0,a.jsx)(o._,{htmlFor:"notifications",children:"Enable email notifications"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold",children:"Time Zone"}),(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(o._,{htmlFor:"timezone",children:"Select Time Zone"}),(0,a.jsxs)(f.Ph,{value:j,onValueChange:N,children:[(0,a.jsx)(f.i4,{children:(0,a.jsx)(f.ki,{placeholder:"Select a timezone"})}),(0,a.jsx)(f.Bw,{className:"max-h-[300px] overflow-y-auto",children:Intl.supportedValuesOf("timeZone").map(e=>(0,a.jsx)(f.Ql,{value:e,children:e.replace(/_/g," ")},e))})]})]})]}),(0,a.jsx)(n.z,{onClick:S,children:"Save Changes"})]})]}),(0,a.jsxs)(d.Zb,{children:[(0,a.jsx)(d.Ol,{children:(0,a.jsx)(d.ll,{children:"Change Password"})}),(0,a.jsxs)(d.aY,{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(o._,{htmlFor:"currentPassword",children:"Current Password"}),(0,a.jsx)(i.I,{type:"password",id:"currentPassword",value:w.current,onChange:e=>v({...w,current:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(o._,{htmlFor:"newPassword",children:"New Password"}),(0,a.jsx)(i.I,{type:"password",id:"newPassword",value:w.new,onChange:e=>v({...w,new:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,a.jsx)(o._,{htmlFor:"confirmPassword",children:"Confirm New Password"}),(0,a.jsx)(i.I,{type:"password",id:"confirmPassword",value:w.confirm,onChange:e=>v({...w,confirm:e.target.value})})]}),b&&(0,a.jsx)("p",{className:"text-sm text-red-500 mt-1",children:b})]}),(0,a.jsx)(n.z,{onClick:C,children:"Update Password"})]})]})]})]})}},68569:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return d}});var a=r(9268),s=r(86006),n=r(1095),i=r(78917),o=r(26602);let l=(0,i.j)("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),d=s.forwardRef((e,t)=>{let{className:r,variant:s,size:i,asChild:d=!1,...c}=e,u=d?n.g7:"button";return(0,a.jsx)(u,{className:(0,o.cn)(l({variant:s,size:i,className:r})),ref:t,...c})});d.displayName="Button"},51597:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},Zb:function(){return i},aY:function(){return c},eW:function(){return u},ll:function(){return l}});var a=r(9268),s=r(86006),n=r(26602);let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});i.displayName="Card";let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});o.displayName="CardHeader";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});l.displayName="CardTitle";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});d.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},70525:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var a=r(9268),s=r(86006),n=r(26602);let i=s.forwardRef((e,t)=>{let{className:r,type:s,...i}=e;return(0,a.jsx)("input",{type:s,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),ref:t,...i})});i.displayName="Input"},13583:function(e,t,r){"use strict";r.d(t,{_:function(){return d}});var a=r(9268),s=r(86006),n=r(10211),i=r(78917),o=r(26602);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.f,{ref:t,className:(0,o.cn)(l(),r),...s})});d.displayName=n.f.displayName},20311:function(e,t,r){"use strict";r.d(t,{Bw:function(){return f},Ph:function(){return d},Ql:function(){return p},i4:function(){return u},ki:function(){return c}});var a=r(9268),s=r(86006),n=r(79255),i=r(62300),o=r(98364),l=r(26602);let d=n.fC;n.ZA;let c=n.B4,u=s.forwardRef((e,t)=>{let{className:r,children:s,...o}=e;return(0,a.jsxs)(n.xz,{ref:t,className:(0,l.cn)("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",r),...o,children:[s,(0,a.jsx)(n.JO,{asChild:!0,children:(0,a.jsx)(i.Z,{className:"h-4 w-4 opacity-50"})})]})});u.displayName=n.xz.displayName;let f=s.forwardRef((e,t)=>{let{className:r,children:s,position:i="popper",...o}=e;return(0,a.jsx)(n.h_,{children:(0,a.jsx)(n.VY,{ref:t,className:(0,l.cn)("relative z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",r),position:i,...o,children:(0,a.jsx)(n.l_,{className:(0,l.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s})})})});f.displayName=n.VY.displayName;let m=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.__,{ref:t,className:(0,l.cn)("py-1.5 pl-8 pr-2 text-sm font-semibold",r),...s})});m.displayName=n.__.displayName;let p=s.forwardRef((e,t)=>{let{className:r,children:s,...i}=e;return(0,a.jsxs)(n.ck,{ref:t,className:(0,l.cn)("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r),...i,children:[(0,a.jsx)("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:(0,a.jsx)(n.wU,{children:(0,a.jsx)(o.Z,{className:"h-4 w-4"})})}),(0,a.jsx)(n.eT,{children:s})]})});p.displayName=n.ck.displayName;let h=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.Z0,{ref:t,className:(0,l.cn)("-mx-1 my-1 h-px bg-muted",r),...s})});h.displayName=n.Z0.displayName},31210:function(e,t,r){"use strict";r.d(t,{r:function(){return o}});var a=r(9268),s=r(86006),n=r(24300),i=r(26602);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)(n.fC,{className:(0,i.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r),...s,ref:t,children:(0,a.jsx)(n.bU,{className:(0,i.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});o.displayName=n.fC.displayName},31859:function(e,t,r){"use strict";r.d(t,{pm:function(){return f}});var a=r(86006);let s=0,n=new Map,i=e=>{if(n.has(e))return;let t=setTimeout(()=>{n.delete(e),c({type:"REMOVE_TOAST",toastId:e})},2e3);n.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?i(r):e.toasts.forEach(e=>{i(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],d={toasts:[]};function c(e){d=o(d,e),l.forEach(e=>{e(d)})}function u(e){let{...t}=e,r=(s=(s+1)%Number.MAX_VALUE).toString(),a=()=>c({type:"DISMISS_TOAST",toastId:r});return c({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||a()}}}),{id:r,dismiss:a,update:e=>c({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=a.useState(d);return a.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>c({type:"DISMISS_TOAST",toastId:e})}}},26602:function(e,t,r){"use strict";r.d(t,{cn:function(){return n}});var a=r(89791),s=r(20293);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.m)((0,a.W)(t))}},10211:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var a=r(86006),s=r(76899),n=r(9268),i=a.forwardRef((e,t)=>(0,n.jsx)(s.WV.label,{...e,ref:t,onMouseDown:t=>{let r=t.target;r.closest("button, input, select, textarea")||(e.onMouseDown?.(t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},24300:function(e,t,r){"use strict";r.d(t,{bU:function(){return N},fC:function(){return j}});var a=r(86006),s=r(1928),n=r(81084),i=r(38899),o=r(85740),l=r(93414),d=r(59952),c=r(76899),u=r(9268),f="Switch",[m,p]=(0,i.b)(f),[h,x]=m(f),g=a.forwardRef((e,t)=>{let{__scopeSwitch:r,name:i,checked:l,defaultChecked:d,required:f,disabled:m,value:p="on",onCheckedChange:x,form:g,...w}=e,[v,j]=a.useState(null),N=(0,n.e)(t,e=>j(e)),_=a.useRef(!1),k=!v||g||!!v.closest("form"),[S=!1,C]=(0,o.T)({prop:l,defaultProp:d,onChange:x});return(0,u.jsxs)(h,{scope:r,checked:S,disabled:m,children:[(0,u.jsx)(c.WV.button,{type:"button",role:"switch","aria-checked":S,"aria-required":f,"data-state":y(S),"data-disabled":m?"":void 0,disabled:m,value:p,...w,ref:N,onClick:(0,s.M)(e.onClick,e=>{C(e=>!e),k&&(_.current=e.isPropagationStopped(),_.current||e.stopPropagation())})}),k&&(0,u.jsx)(b,{control:v,bubbles:!_.current,name:i,value:p,checked:S,required:f,disabled:m,form:g,style:{transform:"translateX(-100%)"}})]})});g.displayName=f;var w="SwitchThumb",v=a.forwardRef((e,t)=>{let{__scopeSwitch:r,...a}=e,s=x(w,r);return(0,u.jsx)(c.WV.span,{"data-state":y(s.checked),"data-disabled":s.disabled?"":void 0,...a,ref:t})});v.displayName=w;var b=e=>{let{control:t,checked:r,bubbles:s=!0,...n}=e,i=a.useRef(null),o=(0,l.D)(r),c=(0,d.t)(t);return a.useEffect(()=>{let e=i.current,t=window.HTMLInputElement.prototype,a=Object.getOwnPropertyDescriptor(t,"checked"),n=a.set;if(o!==r&&n){let t=new Event("click",{bubbles:s});n.call(e,r),e.dispatchEvent(t)}},[o,r,s]),(0,u.jsx)("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:i,style:{...e.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})};function y(e){return e?"checked":"unchecked"}var j=g,N=v}},function(e){e.O(0,[222,795,266,946,77,667,488,744],function(){return e(e.s=2226)}),_N_E=e.O()}]);